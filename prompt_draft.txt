我当前目录下有一个 `mofang.py` 文件，其中包含一个完整的 `RubiksCube` 类。
请帮我创建一个名为 `main.py` 的文件，使用 **FastAPI** 框架构建后端服务。

需求如下：
1. **初始化**：在启动时实例化一个 `RubiksCube` 对象。
2. **CORS设置**：配置 `CORSMiddleware`，允许所有来源 (`allow_origins=["*"]`) 访问，以避免本地开发时的跨域问题。
3. **API 接口**：
    - `GET /state`: 返回当前魔方的状态字典（即 `cube.state`）。
    - `POST /move`: 接收一个 JSON body，格式为 `{"move": "R"}`（或者 "U'", "F2" 等）。调用魔方类的 `move` 方法，并返回更新后的状态。
    - `GET /reset`: 重置魔方并返回初始状态。
4. **启动代码**：在文件末尾添加 `uvicorn` 的启动代码，使其监听 `localhost:8000`。




请创建一个 `index.html` 文件，用于前端展示。

需求如下：
1. **库引入**：通过 CDN (unpkg 或 cdnjs) 引入 **Three.js** 和 **OrbitControls** (用于鼠标拖拽旋转视角)。
2. **场景初始化**：
    - 创建 Scene, PerspectiveCamera, WebGLRenderer。
    - 设置渲染器背景色为深灰色。
    - 添加环境光 (AmbientLight) 和定向光 (DirectionalLight)。
3. **相机控制**：初始化 `OrbitControls`，允许用户用鼠标旋转查看场景。
4. **渲染循环**：编写 `animate` 函数并使用 `requestAnimationFrame` 保持画面刷新。
5. **测试物体**：在场景中心先简单放置一个白色的 `BoxGeometry` (大小 1x1x1)，确保场景能正常显示。



现在修改 `index.html` 中的 JavaScript 代码，替换掉之前的测试方块。我们需要构建真正的魔方结构。

需求如下：
1. **移除旧物体**：删除之前的测试方块。
2. **创建方块组**：编写一个函数 `createRubiksCube()`。
3. **循环生成**：使用三层循环 (x, y, z 从 -1 到 1)，总共生成 27 个小方块 (Cubies)。
4. **几何样式**：
    - 每个小方块的大小设为 0.95 (留一点缝隙，显得更真实)。
    - 材质暂时全部使用灰色 (`0x888888`)。
    - **关键**：给每个小方块添加黑色的**边框线条 (LineSegments)**，这样才能看清格子的轮廓。
5. **坐标存储**：将这 27 个小方块对象添加到一个全局数组 `cubies` 中，并确保将它们添加到了 `scene` 场景中。



现在我们需要将前端的 3D 模型与后端的 Python 数据连接起来。

请在 `index.html` 中添加以下逻辑：

1. **颜色映射定义**：定义一个字典，将后端字符映射为十六进制颜色：


2. **状态获取函数**：编写一个 `async function fetchState()`，请求 `http://localhost:8000/state`。

3. **核心上色逻辑 (难点)**：编写一个 `updateCubeColors(stateData)` 函数。
   - **逻辑提示**：你需要遍历我们之前创建的 27 个小方块。
   - 对于每一个小方块，根据它的 x,y,z 坐标，判断它属于哪几个面（例如 y=1 是 Up 面，x=1 是 Right 面）。
   - 从 `stateData` (后端的字典) 中读取对应面的颜色，并应用到该方块对应的材质索引上 (Three.js 的 BoxGeometry 材质索引顺序通常是：0:Right, 1:Left, 2:Up, 3:Down, 4:Front, 5:Back)。
   - **注意**：如果不确定坐标对应的索引，请帮我生成一些调试用的 console.log 代码。

4. **初始化调用**：在页面加载完成后调用一次 `fetchState()`。



最后，我们添加交互功能。

1. **UI 按钮**：在 HTML 的 body 顶部添加几个简单的 `<button>` 标签：
   - "Scramble" (打乱)
   - "Reset" (重置)
   - 以及基础旋转按钮："U", "D", "L", "R", "F", "B"。

2. **事件绑定**：
   - 为旋转按钮绑定点击事件：发送 POST 请求到 `http://localhost:8000/move`，body 中携带对应的 move 字符。
   - 请求成功后，再次调用 `fetchState()` 来更新视图颜色。
   - Scramble 按钮同理，你需要扩展一下后端接口或者在前端随机发送多次请求（建议让后端加一个 /scramble 接口，或者简单地在前端循环发送指令）。

3. **样式优化**：简单加一点 CSS，让按钮悬浮在页面左上角，不要遮挡 3D 画布。